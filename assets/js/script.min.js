console.clear();const{gsap:gsap,imagesLoaded:imagesLoaded}=window,buttons={prev:document.querySelector(".btn--left"),next:document.querySelector(".btn--right")},cardsContainerEl=document.querySelector(".cards__wrapper"),appBgContainerEl=document.querySelector(".app__bg"),cardInfosContainerEl=document.querySelector(".info__wrapper");function swapCards(direction){const currentCardEl=cardsContainerEl.querySelector(".current--card"),previousCardEl=cardsContainerEl.querySelector(".previous--card"),nextCardEl=cardsContainerEl.querySelector(".next--card"),currentBgImageEl=appBgContainerEl.querySelector(".current--image"),previousBgImageEl=appBgContainerEl.querySelector(".previous--image"),nextBgImageEl=appBgContainerEl.querySelector(".next--image");function swapCardsClass(){currentCardEl.classList.remove("current--card"),previousCardEl.classList.remove("previous--card"),nextCardEl.classList.remove("next--card"),currentBgImageEl.classList.remove("current--image"),previousBgImageEl.classList.remove("previous--image"),nextBgImageEl.classList.remove("next--image"),currentCardEl.style.zIndex="50",currentBgImageEl.style.zIndex="-2","right"===direction?(previousCardEl.style.zIndex="20",nextCardEl.style.zIndex="30",nextBgImageEl.style.zIndex="-1",currentCardEl.classList.add("previous--card"),previousCardEl.classList.add("next--card"),nextCardEl.classList.add("current--card"),currentBgImageEl.classList.add("previous--image"),previousBgImageEl.classList.add("next--image"),nextBgImageEl.classList.add("current--image")):"left"===direction&&(previousCardEl.style.zIndex="30",nextCardEl.style.zIndex="20",previousBgImageEl.style.zIndex="-1",currentCardEl.classList.add("next--card"),previousCardEl.classList.add("current--card"),nextCardEl.classList.add("previous--card"),currentBgImageEl.classList.add("next--image"),previousBgImageEl.classList.add("current--image"),nextBgImageEl.classList.add("previous--image"))}changeInfo(direction),swapCardsClass(),removeCardEvents(currentCardEl)}function changeInfo(direction){let currentInfoEl=cardInfosContainerEl.querySelector(".current--info"),previousInfoEl=cardInfosContainerEl.querySelector(".previous--info"),nextInfoEl=cardInfosContainerEl.querySelector(".next--info");function swapInfosClass(){currentInfoEl.classList.remove("current--info"),previousInfoEl.classList.remove("previous--info"),nextInfoEl.classList.remove("next--info"),"right"===direction?(currentInfoEl.classList.add("previous--info"),nextInfoEl.classList.add("current--info"),previousInfoEl.classList.add("next--info")):"left"===direction&&(currentInfoEl.classList.add("next--info"),nextInfoEl.classList.add("previous--info"),previousInfoEl.classList.add("current--info"))}gsap.timeline().to([buttons.prev,buttons.next],{duration:.2,opacity:.5,pointerEvents:"none"}).to(currentInfoEl.querySelectorAll(".text"),{duration:.4,stagger:.1,translateY:"-120px",opacity:0},"-=").call(()=>{swapInfosClass(direction)}).call(()=>initCardEvents()).fromTo("right"===direction?nextInfoEl.querySelectorAll(".text"):previousInfoEl.querySelectorAll(".text"),{opacity:0,translateY:"40px"},{duration:.4,stagger:.1,translateY:"0px",opacity:1}).to([buttons.prev,buttons.next],{duration:.2,opacity:1,pointerEvents:"all"})}function updateCard(e){const card=e.currentTarget,box=card.getBoundingClientRect(),centerPosition_x=box.left+box.width/2,centerPosition_y=box.top+box.height/2;let angle=Math.atan2(e.pageX-centerPosition_x,0)*(35/Math.PI);gsap.set(card,{"--current-card-rotation-offset":`${angle}deg`});const currentInfoEl=cardInfosContainerEl.querySelector(".current--info");gsap.set(currentInfoEl,{rotateY:`${angle}deg`})}function resetCardTransforms(e){const card=e.currentTarget,currentInfoEl=cardInfosContainerEl.querySelector(".current--info");gsap.set(card,{"--current-card-rotation-offset":0}),gsap.set(currentInfoEl,{rotateY:0})}function initCardEvents(){const currentCardEl=cardsContainerEl.querySelector(".current--card");currentCardEl.addEventListener("pointermove",updateCard),currentCardEl.addEventListener("pointerout",e=>{resetCardTransforms(e)})}function removeCardEvents(card){card.removeEventListener("pointermove",updateCard)}function init(){let tl;gsap.timeline().to(cardsContainerEl.children,{delay:.15,duration:.5,stagger:{ease:"power4.inOut",from:"right",amount:.1},"--card-translateY-offset":"0%"}).to(cardInfosContainerEl.querySelector(".current--info").querySelectorAll(".text"),{delay:.5,duration:.4,stagger:.1,opacity:1,translateY:0}).to([buttons.prev,buttons.next],{duration:.4,opacity:1,pointerEvents:"all"},"-=0.4")}buttons.next.addEventListener("click",()=>swapCards("right")),buttons.prev.addEventListener("click",()=>swapCards("left")),initCardEvents();const waitForImages=()=>{const images=[...document.querySelectorAll("img")],totalImages=images.length;let loadedImages=0;const loaderEl=document.querySelector(".loader span");gsap.set(cardsContainerEl.children,{"--card-translateY-offset":"100vh"}),gsap.set(cardInfosContainerEl.querySelector(".current--info").querySelectorAll(".text"),{translateY:"40px",opacity:0}),gsap.set([buttons.prev,buttons.next],{pointerEvents:"none",opacity:"0"}),images.forEach(image=>{imagesLoaded(image,instance=>{if(instance.isComplete){loadedImages++;let loadProgress=loadedImages/totalImages;gsap.to(loaderEl,{duration:1,scaleX:loadProgress,backgroundColor:`hsl(${120*loadProgress}, 100%, 50%`}),totalImages==loadedImages&&gsap.timeline().to(".loading__wrapper",{duration:.8,opacity:0,pointerEvents:"none"}).call(()=>init())}})})};function shiftLeft(){const boxes=document.querySelectorAll(".box"),tmpNode=boxes[0];boxes[0].className="box move-out-from-left",setTimeout((function(){boxes.length>5&&(tmpNode.classList.add("box--hide"),boxes[5].className="box move-to-position5-from-left"),boxes[1].className="box move-to-position1-from-left",boxes[2].className="box move-to-position2-from-left",boxes[3].className="box move-to-position3-from-left",boxes[4].className="box move-to-position4-from-left",boxes[0].remove(),document.querySelector(".cards__container").appendChild(tmpNode)}),500)}waitForImages();